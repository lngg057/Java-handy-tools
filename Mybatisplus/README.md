# MybatisPlus è¾…åŠ©æ’ä»¶

> ä¸€æ¬¾åŸºäºMybatisåŠŸèƒ½çš„æ‰©å±•æ’ä»¶ï¼Œå¯ä»¥å®ç°ç±»ä¼¼äº'JPA'æ¨¡å¼çš„ï¼Œé€šè¿‡å¯¹è±¡æ“ä½œæ•°æ®åº“çš„å½¢å¼æ¥è¿›è¡Œæ•°æ®æ“ä½œï¼Œè€Œä¸ç”¨ç¼–å†™sqlè¯­å¥ã€‚

## å®˜ç½‘åœ°å€

https://baomidou.com

## ä»£ç æ‰˜ç®¡åœ°å€

**[Gitee](https://gitee.com/baomidou/mybatis-plus)**| **[Github](https://github.com/baomidou/mybatis-plus)**

## æ’ä»¶ç®€ä»‹

MybatisPlusæ˜¯ä¸€æ¬¾éå¸¸å¥½ç”¨ä¸”ä¾¿æ·çš„Mybatisæ‰©å±•æ’ä»¶ï¼Œç»å¸¸è£ç™»Javaæ’ä»¶ä½¿ç”¨çƒ­é—¨æ’è¡Œæ¦œTOP1ã€‚

MybatisPluså±äºä¾µå…¥åº¦æä½çš„Mybatiså¢å¼ºæ’ä»¶ï¼Œå¼•å…¥åæ—¢ä¸ä¼šäº§ç”Ÿè¿‡å¤§çš„æŸè€—ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç°æœ‰çš„ç›¸å…³é€»è¾‘ã€‚ä¹Ÿå°±æ˜¯è¯´ä»Mavenä¸­å¼•å…¥è¯¥é¡¹ç›®åï¼ŒåŸºæœ¬ä¸ä¼šå¯¹ç°æœ‰çš„é¡¹ç›®æ¡†æ¶ã€é€»è¾‘ä»¥åŠæ€§èƒ½äº§ç”Ÿå¤ªå¤§çš„å½±å“ã€‚

MybatisPlusçš„åŸºæœ¬ä½¿ç”¨è§„åˆ™æ˜¯ï¼Œé€šè¿‡å¯¹è±¡è°ƒç”¨çš„å½¢å¼æ¥è¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰æ•°æ®åº“æ“ä½œã€‚

åŒæ—¶æ’ä»¶å†…ç½®å·²ç»å®šä¹‰å¥½çš„Mapperå’ŒServiceç±»å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«å¯¹åº”å±‚çº§çš„å¸¸è§„å•è¡¨æ“ä½œï¼Œæ¯”æ–¹è¯´ï¼šå•è¡¨çš„æ’å…¥ã€æ ¹æ®ä¸»é”®çš„æ›´æ–°ã€æ ¹æ®æŸ¥è¯¢æ¡ä»¶çš„æ›´æ–°ã€æ‰¹é‡æ–°å¢æ›´æ–°æ“ä½œã€æ ¹æ®æŸ¥è¯¢æ¡ä»¶çš„åˆ—è¡¨ä»¥åŠåˆ†é¡µæŸ¥è¯¢ç­‰ã€‚è€Œä»¥ä¸Šçš„è¿™äº›ä»…ä»…éœ€è¦å°‘é‡çš„é…ç½®å³å¯å®ç°ã€‚

MybatisPluså†…ç½®æœ‰æ¡ä»¶æŸ¥è¯¢å™¨ï¼Œå¹¶ä¸”æ”¯æŒLamdaçš„è°ƒç”¨æ–¹å¼ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„é€šå¤šå¯¹è±¡è°ƒç”¨çš„æ–¹æ³•ï¼Œæ¥æ„é€ æƒ³è¦çš„æŸ¥è¯¢æ¡ä»¶ï¼Œè€Œæ— éœ€å°†æŸ¥è¯¢å‚æ•°ä»Controllerå±‚ä¸€è·¯ä¼ åˆ°Mapperï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒå†™é”™æˆ–è€…æ‹¼é”™æŸ¥è¯¢SQLå­—æ®µã€‚

æ’ä»¶æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®ï¼Œä¹Ÿæ”¯æŒæ•°æ®åº“é»˜è®¤è‡ªå¢ã€‚MybatisPluså†…ç½®å¤šç§ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œé…ç½®åå³å¯ä»¥åœ¨æ’å…¥æ“ä½œæ—¶è‡ªåŠ¨ç”Ÿæˆä¸»é”®IDï¼Œå¹¶æ›´æ–°åˆ°æ•°æ®è¡¨ä¸­ã€‚è‡ªå¸¦çš„ç”Ÿæˆä¸»é”®è§„åˆ™æœ‰é›ªèŠ±ç®—æ³•å’ŒUUIDã€‚è‡ªå¸¦çš„æ•°æ®åº“ä¸»é”®ç­–ç•¥æœ‰DB2KeyGeneratorï¼ŒPostgreKeyGeneratorï¼ŒOracleKeyGeneratorï¼ŒH2KeyGeneratorç­‰ï¼Œå¦‚æœå†…ç½®æ”¯æŒä¸æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä¹Ÿå¯é€šè¿‡è°ƒç”¨å®ç°IKeyGeneratoræ¥å£æ¥è¿›è¡Œæ‰©å±•ã€‚

## ç‰¹è‰²åŠŸèƒ½

1. ### è‡ªåŠ¨åˆ†é¡µæ’ä»¶

    MybatisPluså†…ç½®ä¸€æ¬¾ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¥½ç”¨çš„åˆ†é¡µæ’ä»¶` PaginationInterceptor`ï¼Œå¯ä»¥é€šè¿‡ spring xmlçš„å½¢å¼æˆ–è€…springbootçš„ @Configurationå½¢å¼æ¥é…ç½®å¯¼å…¥ã€‚

    è¯¥åˆ†é¡µæ’ä»¶å¯ä»¥åšäº›ç®€å•çš„å‚æ•°é…ç½®ï¼ŒåŒ…æ‹¬è¯·æ±‚è¶Šç•Œä¹‹åçš„æ“ä½œï¼Œæœ€å¤§å•é¡µè¯·æ±‚æ•°é‡é™åˆ¶ç­‰ã€‚é…ç½®å®Œæ¯•åï¼Œå¯ä»¥ç›´æ¥åœ¨æ–¹æ³•è°ƒç”¨çš„å‚æ•°ä¸­ä¼ å…¥IPageå¯¹è±¡å³å¯å®ç°è‡ªåŠ¨åˆ†é¡µçš„æ“ä½œã€‚

2. ### è‡ªåŠ¨å¡«å……åŠŸèƒ½

    åœ¨è®¾è®¡è¡¨ç»“æ„æ—¶ï¼Œé€šå¸¸ä¼šæœ‰ä¸€äº›è¡¨é€šç”¨å­—æ®µï¼Œæ¯”æ–¹è¯´` createTime`ï¼Œ ` updateTime`  ï¼Œ`createUser` ï¼Œ`updateUser` ç­‰ã€‚

    è¿™äº›å­—æ®µå¦‚æœä¸è¿›è¡Œé€šç”¨å¤„ç†çš„è¯ï¼ŒåŸºæœ¬ä¼šé›¶æ•£åˆ†å¸ƒåœ¨é¡¹ç›®çš„å„ä¸ªä»£ç ä¸­ï¼Œå¹¶ä¸”ä¼šç»å¸¸ä¼šç¼ºå¤±æ“ä½œæŸå‡ ä¸ªå­—æ®µï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šä¸ªäººç¼–å†™ä»£ç ï¼Œæ–°å¢åŠŸèƒ½æˆ–è€…ä¿®å¤é—ç•™é—®é¢˜çš„æ—¶å€™å°¤ä¸ºæ˜æ˜¾ã€‚

    MybatisPluså†…ç½®æä¾›**è‡ªåŠ¨å¡«å……åŠŸèƒ½**ï¼Œå¹¶ä¸”ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ã€‚

    1. ç¬¬ä¸€æ­¥éœ€è¦è‡ªå·±ç¼–å†™@Componentï¼Œå¹¶å®ç°` MetaObjectHandler`æ¥å£çš„å¼•ç”¨ï¼Œå¹¶é‡å†™å…¶å¯¹åº”çš„`insertFil`lå’Œ`updateFill`æ–¹æ³•å³å¯ï¼ˆè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯åœ¨ä½ æ‰§è¡Œæ’å…¥ï¼Œä¸€ä¸ªæ˜¯ä½ åœ¨æ‰§è¡Œæ›´æ–°æ“ä½œæ—¶ï¼Œè‡ªå®šä¹‰çš„æ•°æ®èµ‹å€¼æ“ä½œï¼‰ã€‚

        ```java
        @Slf4j
        @Component
        public class MyMetaObjectHandler implements MetaObjectHandler {
        
            @Override
            public void insertFill(MetaObject metaObject) {
                log.info("start insert fill ....");
                this.strictInsertFill(metaObject, "createTime", LocalDateTime.class, LocalDateTime.now()); // èµ·å§‹ç‰ˆæœ¬ 3.3.0(æ¨èä½¿ç”¨)
                // æˆ–è€…
                this.strictInsertFill(metaObject, "createTime", () -> LocalDateTime.now(), LocalDateTime.class); // èµ·å§‹ç‰ˆæœ¬ 3.3.3(æ¨è)
                // æˆ–è€…
                this.fillStrategy(metaObject, "createTime", LocalDateTime.now()); // ä¹Ÿå¯ä»¥ä½¿ç”¨(3.3.0 è¯¥æ–¹æ³•æœ‰bug)
            }
        
            @Override
            public void updateFill(MetaObject metaObject) {
                log.info("start update fill ....");
                this.strictUpdateFill(metaObject, "updateTime", LocalDateTime.class, LocalDateTime.now()); // èµ·å§‹ç‰ˆæœ¬ 3.3.0(æ¨è)
                // æˆ–è€…
                this.strictUpdateFill(metaObject, "updateTime", () -> LocalDateTime.now(), LocalDateTime.class); // èµ·å§‹ç‰ˆæœ¬ 3.3.3(æ¨è)
                // æˆ–è€…
                this.fillStrategy(metaObject, "updateTime", LocalDateTime.now()); // ä¹Ÿå¯ä»¥ä½¿ç”¨(3.3.0 è¯¥æ–¹æ³•æœ‰bug)
            }
        }
        ```

    2. ç¬¬äºŒæ­¥éœ€è¦å°†å¯¹åº”æ•°æ®å®ä½“è¿›è¡Œè‡ªåŠ¨å¡«å……çš„å¯¹è±¡æ·»åŠ æ³¨è§£` @TableField(.. fill = FieldFill.INSERT)`ï¼Œå…·ä½“çš„fill ç±»å‹ï¼Œåˆ™éœ€è¦æ ¹æ®è¯¥å­—æ®µéœ€è¦åœ¨ä»€ä¹ˆæ—¶å€™è¢«æ“ä½œæ¥å†³å®šã€‚

        ```java
        public class User {
            // æ³¨æ„ï¼è¿™é‡Œéœ€è¦æ ‡è®°ä¸ºå¡«å……å­—æ®µ
            @TableField(.. fill = FieldFill.INSERT)
            private String fillField;
            ....
        }
        ```

    3. å…·ä½“çš„å®ç°æ–¹æ¡ˆå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£å’Œdemoæè¿°ã€‚

3. ### é€»è¾‘åˆ é™¤åŠŸèƒ½

    å¯¹äºæŸäº›ç³»ç»Ÿæ¥è¯´ï¼Œä¸ºäº†æ–¹ä¾¿æ•°æ®æ¢å¤å’Œä¿æŠ¤æ•°æ®æœ¬èº«ä»·å€¼ï¼Œåœ¨å®é™…è¿›è¡Œæ•°æ®åº“åˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šçœŸæ­£çš„å¯¹è¿™äº›æ•°æ®è¿›è¡Œç‰©ç†ç£ç›˜åˆ é™¤ï¼Œè€Œæ˜¯é€šè¿‡ç‰¹æ®Šçš„æŒ‡å®šå­—æ®µï¼Œæ¥è¿›è¡Œé€»è¾‘åˆ é™¤ã€‚

    MybatisPluså¯ä»¥æ”¯æŒå…¨å±€é…ç½®å¯¹åº”çš„é€»è¾‘åˆ é™¤å­—æ®µï¼Œæ¥è¾¾åˆ°ä¸€å¤„é…ç½®ï¼Œå¤„å¤„ä½¿ç”¨çš„æ•ˆæœã€‚é…ç½®æ–¹æ³•å¦‚ä¸‹

    1. åœ¨å¯¹åº”çš„ymlæˆ–è€…propertiesé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ` logic-delete-field`é…ç½®å­—æ®µï¼Œæ¥æŒ‡å®šæ•°æ®åº“ä¸­çš„å“ªä¸ªå­—æ®µæ˜ å°„ä¸ºé€»è¾‘åˆ é™¤æ ‡å¿—å­—æ®µï¼Œå¹¶æ ¹æ®` logic-delete-value` å’Œ` logic-not-delete-value` æ¥æŒ‡å®šä»–å¯¹åº”é€»è¾‘åˆ é™¤å’Œä¸åˆ é™¤çš„å€¼ã€‚
    2. åœ¨å®ä½“ç±»å­—æ®µä¸ŠåŠ ä¸Š`@TableLogic`æ³¨è§£ã€‚

    > **è¯´æ˜**:
    >
    > é€»è¾‘åˆ é™¤åªå¯¹**è‡ªåŠ¨æ³¨å…¥**çš„sqlèµ·æ•ˆï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯è‡ªå·±ç¼–å†™çš„SQLä¸ä¼šæ‰§è¡Œé€»è¾‘åˆ é™¤ç›¸å…³æ“ä½œï¼Œè¿™æ—¶å€™éœ€è¦è‡ªè¡Œè¿›è¡Œç›¸å…³æ“ä½œ:
    >
    > - æ’å…¥: ä¸ä½œé™åˆ¶
    > - æŸ¥æ‰¾: è¿½åŠ whereæ¡ä»¶è¿‡æ»¤æ‰å·²åˆ é™¤æ•°æ®,ä¸”ä½¿ç”¨ wrapper.entity ç”Ÿæˆçš„whereæ¡ä»¶ä¼šå¿½ç•¥è¯¥å­—æ®µ
    > - æ›´æ–°: è¿½åŠ whereæ¡ä»¶é˜²æ­¢æ›´æ–°åˆ°å·²åˆ é™¤æ•°æ®,ä¸”ä½¿ç”¨ wrapper.entity ç”Ÿæˆçš„whereæ¡ä»¶ä¼šå¿½ç•¥è¯¥å­—æ®µ
    > - åˆ é™¤: è½¬å˜ä¸º æ›´æ–°
    >
    > ä¾‹å¦‚:
    >
    > - åˆ é™¤: `update user set deleted=1 where id = 1 and deleted=0`
    > - æŸ¥æ‰¾: `select id,name,deleted from user where deleted=0`
    >
    > å­—æ®µç±»å‹æ”¯æŒè¯´æ˜:
    >
    > - æ”¯æŒæ‰€æœ‰æ•°æ®ç±»å‹(æ¨èä½¿ç”¨ `Integer`,`Boolean`,`LocalDateTime`)
    > - å¦‚æœæ•°æ®åº“å­—æ®µä½¿ç”¨`datetime`,é€»è¾‘æœªåˆ é™¤å€¼å’Œå·²åˆ é™¤å€¼æ”¯æŒé…ç½®ä¸ºå­—ç¬¦ä¸²`null`,å¦ä¸€ä¸ªå€¼æ”¯æŒé…ç½®ä¸ºå‡½æ•°æ¥è·å–å€¼å¦‚`now()`

4. ### åŠ¨æ€è¡¨åæ’ä»¶

    æ’ä»¶çš„ä½¿ç”¨åœºæ™¯ï¼šåœ¨è¿›è¡Œä¸€äº›ç®€å•åˆ†åŒºçš„è¡¨ç»“æ„ä¸­ï¼ˆæ¯”æ–¹è¯´ä¸šåŠ¡ä¸Šå°†ç”¨æˆ·è¡¨æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ‹†åˆ†æˆå¤šå¼ è¡¨ç­‰ï¼‰ï¼Œå¯ä»¥é€šè¿‡è¯¥æ’ä»¶ï¼Œåœ¨ä¸ä¿®æ”¹é¡¶å±‚é€šç”¨çš„å®ç°é€»è¾‘å’Œå¯¹å¤–è¡¨è±¡çš„åŸºç¡€ä¸Šï¼Œè¿›è¡ŒæŒ‡å®šæ•°æ®åº“è¡¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚

    å…·ä½“å®ç°æ–¹æ¡ˆå‚è€ƒï¼šğŸ‘‰ [mybatis-plus-sample-dynamic-tablename](https://gitee.com/baomidou/mybatis-plus-samples/tree/master/mybatis-plus-sample-dynamic-tablename)

    > **æ³¨æ„äº‹é¡¹**ï¼š
    >
    > - åº•å±‚å®ç°åŸç†ä¸ºè§£ææ›¿æ¢è®¾å®šè¡¨åä¸ºå¤„ç†å™¨çš„è¿”å›è¡¨åï¼Œè¡¨åå»ºè®®å¯ä»¥å®šä¹‰å¤æ‚ä¸€äº›é¿å…è¯¯æ›¿æ¢
    > - ä¾‹å¦‚ï¼šçœŸå®è¡¨åä¸º user è®¾å®šä¸º mp_dt_user å¤„ç†å™¨æ›¿æ¢ä¸º user_2019 ç­‰

5. ### å¤šç§Ÿæˆ·æ’ä»¶

    å…·ä½“å®ç°æ–¹æ¡ˆå‚è€ƒï¼šğŸ‘‰ [mybatis-plus-sample-tenant](https://gitee.com/baomidou/mybatis-plus-samples/tree/master/mybatis-plus-sample-tenant)

    ç§Ÿæˆ·æ¦‚å¿µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¦‚å¿µï¼Œå½“ç³»ç»Ÿéœ€è¦å¯¹åŒä¸€ä¸ªæ¨¡å—çš„æ•°æ®é‡‡ç”¨åŒºåŸŸéš”ç¦»çš„æ–¹å¼æ¥è®¿é—®æ—¶ï¼Œå°±å¯ä»¥é‡‡ç”¨ç§Ÿæˆ·æ¥å®ç°å¯¹åº”åŠŸèƒ½ã€‚

    MybatisPlusè‡ªå¸¦å¤šç§Ÿæˆ·æ’ä»¶ï¼Œå¯ç”¨å¤šç§Ÿæˆ·æ’ä»¶åæ‰€æœ‰æ‰§è¡Œçš„methodçš„sqléƒ½ä¼šè¿›è¡Œå¤„ç†ï¼Œæ¥æŒ‰ç…§å¯¹åº”çš„ç§Ÿæˆ·IDè¿›è¡Œæ•°æ®è¿‡æ»¤ã€‚

    ä¸‹é¢æä¾›ä¸€ç§å¯èƒ½æ€§çš„é…ç½®å¤šç§Ÿæˆ·çš„æ–¹æ¡ˆã€‚

    1. ç§Ÿæˆ·å±æ€§ã€‚

        ```xml
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-boot-starter</artifactId>
            <version>3.4.0</version>
        </dependency>
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-extension</artifactId>
            <version>3.4.0</version>
        </dependency>
        ```

        

    2. ç§Ÿæˆ·é…ç½®ã€‚

        ```java
        package vip.mate.core.database.props;
        
        import lombok.Getter;
        import lombok.Setter;
        import org.springframework.boot.context.properties.ConfigurationProperties;
        import org.springframework.cloud.context.config.annotation.RefreshScope;
        
        import java.util.ArrayList;
        import java.util.Arrays;
        import java.util.List;
        
        /**
         * ç§Ÿæˆ·å±æ€§
         */
        @Getter
        @Setter
        @RefreshScope
        @ConfigurationProperties(prefix = "mate.tenant")
        public class TenantProperties {
        
            /**
             * æ˜¯å¦å¼€å¯ç§Ÿæˆ·æ¨¡å¼
             */
            private Boolean enable = true;
        
            /**
             * éœ€è¦æ’é™¤çš„å¤šç§Ÿæˆ·çš„è¡¨
             */
            private List<String> ignoreTables = Arrays.asList("mate_sys_user", "mate_sys_depart", "mate_sys_role", "mate_sys_tenant", "mate_sys_role_permission");
        
            /**
             * å¤šç§Ÿæˆ·å­—æ®µåç§°
             */
            private String column = "tenant_id";
        
            /**
             * æ’é™¤ä¸è¿›è¡Œç§Ÿæˆ·éš”ç¦»çš„sql
             * æ ·ä¾‹å…¨è·¯å¾„ï¼švip.mate.system.mapper.UserMapper.findList
             */
            private List<String> ignoreSqls = new ArrayList<>();
        }
        ```

        

    3. Mybatis plusé…ç½®ã€‚

        ```java
        package vip.mate.core.database.config;
        
        import com.baomidou.mybatisplus.extension.plugins.handler.TenantLineHandler;
        import com.baomidou.mybatisplus.extension.plugins.inner.TenantLineInnerInterceptor;
        import lombok.AllArgsConstructor;
        import net.sf.jsqlparser.expression.Expression;
        import net.sf.jsqlparser.expression.NullValue;
        import net.sf.jsqlparser.expression.StringValue;
        import org.springframework.boot.autoconfigure.AutoConfigureBefore;
        import org.springframework.boot.context.properties.EnableConfigurationProperties;
        import org.springframework.context.annotation.Bean;
        import org.springframework.context.annotation.Configuration;
        import vip.mate.core.common.context.TenantContextHolder;
        import vip.mate.core.database.props.TenantProperties;
        
        /**
         * å¤šç§Ÿæˆ·é…ç½®ä¸­å¿ƒ
         */
        @Configuration
        @AllArgsConstructor
        @AutoConfigureBefore(MybatisPlusConfiguration.class)
        @EnableConfigurationProperties(TenantProperties.class)
        public class TenantConfiguration {
        
            private final TenantProperties tenantProperties;
        
            /**
             * æ–°å¤šç§Ÿæˆ·æ’ä»¶é…ç½®,ä¸€ç¼“å’ŒäºŒç¼“éµå¾ªmybatisçš„è§„åˆ™,
             * éœ€è¦è®¾ç½® MybatisConfiguration#useDeprecatedExecutor = false
             * é¿å…ç¼“å­˜ä¸‡ä¸€å‡ºç°é—®é¢˜
             * @return
             */
            @Bean
            public TenantLineInnerInterceptor tenantLineInnerInterceptor(){
                return new TenantLineInnerInterceptor(new TenantLineHandler() {
                    /**
                     * è·å–ç§Ÿæˆ·ID
                     * @return
                     */
                    @Override
                    public Expression getTenantId() {
                        String tenant = TenantContextHolder.getTenantId();
                        if (tenant != null) {
                            return new StringValue(TenantContextHolder.getTenantId());
                        }
                        return new NullValue();
                    }
        
                    /**
                     * è·å–å¤šç§Ÿæˆ·çš„å­—æ®µå
                     * @return String
                     */
                    @Override
                    public String getTenantIdColumn() {
                        return tenantProperties.getColumn();
                    }
        
                    /**
                     * è¿‡æ»¤ä¸éœ€è¦æ ¹æ®ç§Ÿæˆ·éš”ç¦»çš„è¡¨
                     * è¿™æ˜¯ default æ–¹æ³•,é»˜è®¤è¿”å› false è¡¨ç¤ºæ‰€æœ‰è¡¨éƒ½éœ€è¦æ‹¼å¤šç§Ÿæˆ·æ¡ä»¶
                     * @param tableName è¡¨å
                     */
                    @Override
                    public boolean ignoreTable(String tableName) {
                        return tenantProperties.getIgnoreTables().stream().anyMatch(
                                (t) -> t.equalsIgnoreCase(tableName)
                        );
                    }
                });
            }
        }
        ```

        

6. ### ä¹è§‚é”é…ç½®

7. ### SQLæ€§èƒ½è§„èŒƒ

8. ### é˜²æ­¢å…¨è¡¨æ›´æ–°ä¸åˆ é™¤

## æœ‰ç‘•ç–µçš„åœ°æ–¹

1. å¤§éƒ¨åˆ†æƒ…å†µä¸‹åªæ˜¯é’ˆå¯¹å•è¡¨æŸ¥è¯¢çš„æ“ä½œã€‚åœ¨é¢å¯¹è·¨å¤šå¼ è¡¨è¿›è¡Œçº§è”æŸ¥è¯¢ï¼Œæ˜ å°„å¤šä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œè¯¥æ’ä»¶å°±åŸºæœ¬æ¯«æ— å‘æŒ¥çš„ä½™åœ°ï¼Œè¿™æ—¶å°±åªèƒ½å›åˆ°æœ€åŸå§‹çš„Mybatisæ“ä½œï¼Œè¿›è¡ŒMapperçš„è‡ªå®šä¹‰SQLç¼–å†™å’Œå¤šå¯¹è±¡æ•°æ®çš„ç»‘å®š

2. åˆ†é¡µæ’ä»¶ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†å¤šä¸ª` left join` æ“ä½œã€‚åœ¨è‡ªå®šä¹‰ç¼–å†™æ‰§è¡ŒSQLæ—¶ï¼Œå¦‚æœSQL ä¸­åŒ…å«å¤šçº§` left join` æ“ä½œï¼Œè€Œæ²¡æœ‰æŒ‰ç…§è¦æ±‚çš„æ ¼å¼ç¼–å†™è¯­å¥ï¼ˆæ¯”æ–¹è¯´æ²¡æœ‰ç»™æŸ¥è¯¢å…³è”çš„è¡¨æˆ–è€…å­—æ®µè®¾ç½®åˆ«åç­‰ï¼‰ï¼Œåˆ™ä¼šå‡ºç°**åˆ†é¡µæŸ¥è¯¢çš„ç»“æœå’Œæ€»æ•°ä¸åŒ¹é…**çš„æƒ…å†µ ã€‚

    åŸå› æ˜¯å› ä¸ºMybatisPlusçš„åˆ†é¡µæ’ä»¶åœ¨ç”Ÿæˆ countSql æ—¶ï¼Œä¼šåœ¨ `left join` çš„è¡¨ä¸å‚ä¸ `where` æ¡ä»¶çš„æƒ…å†µä¸‹,æŠŠ `left join` ä¼˜åŒ–æ‰ã€‚æ‰€ä»¥è¿™é‡Œä¹Ÿæ˜¯ä¸ªå‘

3. 